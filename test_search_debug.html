<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Debug Test</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .search-box {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border: 2px solid #4A90E2;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .debug-info {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .message {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        .message.filtered {
            display: none;
        }
        .message.visible {
            display: block;
        }
    </style>
</head>
<body>
    <h1>Search Debug Test</h1>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const SAMPLE_MESSAGES = [
            { id: 1, from: 'john.doe@example.com', subject: 'Meeting tomorrow' },
            { id: 2, from: 'jane.smith@example.com', subject: 'Project update' },
            { id: 3, from: 'bob.jones@example.com', subject: 'Quick question' },
            { id: 4, from: 'alice.wilson@example.com', subject: 'Meeting notes' },
            { id: 5, from: 'charlie.brown@example.com', subject: 'Follow up on project' }
        ];

        function SearchTest() {
            const [searchQuery, setSearchQuery] = useState('');
            const [updateCount, setUpdateCount] = useState(0);

            const handleSearchChange = (e) => {
                const newValue = e.target.value;
                console.log('Search changed:', newValue);
                setSearchQuery(newValue);
                setUpdateCount(prev => prev + 1);
            };

            const filteredMessages = SAMPLE_MESSAGES.filter(message => {
                if (!searchQuery) return true;
                
                const query = searchQuery.toLowerCase();
                return message.from.toLowerCase().includes(query) ||
                       message.subject.toLowerCase().includes(query);
            });

            return (
                <div>
                    <input
                        type="text"
                        className="search-box"
                        placeholder="Search messages..."
                        value={searchQuery}
                        onChange={handleSearchChange}
                    />
                    
                    <div className="debug-info">
                        <strong>Debug Info:</strong><br/>
                        Current search query: <code>{searchQuery || '(empty)'}</code><br/>
                        Update count: {updateCount}<br/>
                        Total messages: {SAMPLE_MESSAGES.length}<br/>
                        Filtered messages: {filteredMessages.length}
                    </div>

                    <h3>Messages ({filteredMessages.length} shown)</h3>
                    {filteredMessages.map(message => (
                        <div key={message.id} className="message visible">
                            <strong>From:</strong> {message.from}<br/>
                            <strong>Subject:</strong> {message.subject}
                        </div>
                    ))}
                    
                    {filteredMessages.length === 0 && (
                        <div className="message">
                            No messages match your search query "{searchQuery}"
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<SearchTest />);
    </script>
</body>
</html>
