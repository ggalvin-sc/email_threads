<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ThreadView - Email Thread Navigator</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: #f8f9fa;
            height: 100vh;
            overflow: hidden;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Header */
        .header {
            background: white;
            border-bottom: 1px solid #e1e5e9;
            padding: 12px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 60px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .app-logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 18px;
            font-weight: 600;
            color: #1a73e8;
        }

        .logo-icon {
            width: 24px;
            height: 24px;
            background: #1a73e8;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
        }

        .breadcrumb {
            color: #5f6368;
            font-size: 14px;
        }

        .header-center {
            flex: 1;
            max-width: 600px;
            margin: 0 24px;
        }

        .search-bar {
            width: 100%;
            padding: 8px 16px;
            border: 1px solid #dadce0;
            border-radius: 24px;
            font-size: 14px;
            outline: none;
            background: #f8f9fa;
        }

        .search-bar:focus {
            background: white;
            border-color: #1a73e8;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .new-thread-btn {
            background: #1a73e8;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .new-thread-btn:hover {
            background: #1557b0;
        }

        /* Main Content */
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Left Sidebar */
        .left-sidebar {
            width: 280px;
            background: white;
            border-right: 1px solid #e1e5e9;
            display: flex;
            flex-direction: column;
        }

        .sidebar-section {
            padding: 16px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #202124;
            margin-bottom: 12px;
        }

        .thread-filter {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .filter-item {
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: #5f6368;
        }

        .filter-item:hover {
            background: #f8f9fa;
        }

        .filter-item.active {
            background: #e8f0fe;
            color: #1a73e8;
            font-weight: 500;
        }

        .filter-count {
            background: #dadce0;
            color: #5f6368;
            padding: 2px 6px;
            border-radius: 12px;
            font-size: 12px;
            min-width: 18px;
            text-align: center;
        }

        .filter-item.active .filter-count {
            background: #1a73e8;
            color: white;
        }

        .thread-list {
            flex: 1;
            overflow-y: auto;
            padding: 0 16px 16px;
        }

        .thread-item {
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            border: 1px solid transparent;
            margin-bottom: 8px;
        }

        .thread-item:hover {
            background: #f8f9fa;
        }

        .thread-item.active {
            background: #e8f0fe;
            border-color: #1a73e8;
        }

        .thread-title {
            font-size: 14px;
            font-weight: 500;
            color: #202124;
            margin-bottom: 4px;
        }

        .thread-meta {
            font-size: 12px;
            color: #5f6368;
            display: flex;
            gap: 8px;
            margin-bottom: 4px;
        }

        .thread-preview {
            font-size: 12px;
            color: #5f6368;
            line-height: 1.4;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        /* Center Content */
        .center-content {
            flex: 1;
            background: white;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .conversation-header {
            padding: 20px 24px;
            border-bottom: 1px solid #e1e5e9;
        }

        .conversation-title {
            font-size: 20px;
            font-weight: 500;
            color: #202124;
            margin-bottom: 8px;
        }

        .conversation-meta {
            display: flex;
            align-items: center;
            gap: 16px;
            font-size: 14px;
            color: #5f6368;
        }

        .conversation-actions {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
        }

        .action-btn {
            padding: 6px 12px;
            border: 1px solid #dadce0;
            background: white;
            border-radius: 4px;
            font-size: 13px;
            cursor: pointer;
            color: #5f6368;
        }

        .action-btn:hover {
            background: #f8f9fa;
        }

        .action-btn.primary {
            background: #1a73e8;
            color: white;
            border-color: #1a73e8;
        }

        .action-btn.primary:hover {
            background: #1557b0;
        }

        .conversation-view {
            flex: 1;
            overflow-y: auto;
            padding: 16px 24px;
        }

        .view-controls {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid #e1e5e9;
        }

        .view-btn {
            padding: 6px 12px;
            border: 1px solid #dadce0;
            background: white;
            border-radius: 4px;
            font-size: 13px;
            cursor: pointer;
            color: #5f6368;
        }

        .view-btn.active {
            background: #1a73e8;
            color: white;
            border-color: #1a73e8;
        }

        .sort-controls {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #5f6368;
        }

        .timeline-container {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
            height: 120px;
        }

        .message-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            display: flex;
            gap: 12px;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #1a73e8;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 500;
            flex-shrink: 0;
        }

        .message-content {
            flex: 1;
        }

        .message-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }

        .message-author {
            font-weight: 500;
            color: #202124;
            font-size: 14px;
        }

        .message-email {
            color: #5f6368;
            font-size: 13px;
        }

        .message-time {
            color: #5f6368;
            font-size: 13px;
            margin-left: auto;
        }

        .message-subject {
            font-weight: 500;
            color: #202124;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .message-body {
            color: #5f6368;
            line-height: 1.5;
            font-size: 14px;
        }

        .message-actions {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }

        .message-action {
            color: #1a73e8;
            font-size: 13px;
            cursor: pointer;
            text-decoration: none;
        }

        .message-action:hover {
            text-decoration: underline;
        }

        /* Right Sidebar */
        .right-sidebar {
            width: 300px;
            background: white;
            border-left: 1px solid #e1e5e9;
            overflow-y: auto;
        }

        .sidebar-section h3 {
            font-size: 16px;
            font-weight: 600;
            color: #202124;
            margin-bottom: 12px;
        }

        .participants-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .participant {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border-radius: 6px;
        }

        .participant:hover {
            background: #f8f9fa;
        }

        .participant-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #1a73e8;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 500;
        }

        .participant-info {
            flex: 1;
        }

        .participant-name {
            font-size: 13px;
            font-weight: 500;
            color: #202124;
        }

        .participant-role {
            font-size: 12px;
            color: #5f6368;
        }

        .participant-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #34a853;
        }

        .participant-status.away {
            background: #fbbc04;
        }

        .participant-status.offline {
            background: #9aa0a6;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        .stat-item {
            text-align: center;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .stat-number {
            font-size: 20px;
            font-weight: 600;
            color: #202124;
        }

        .stat-label {
            font-size: 12px;
            color: #5f6368;
            margin-top: 2px;
        }

        .attachments-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .attachment {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border: 1px solid #e1e5e9;
            border-radius: 6px;
            cursor: pointer;
        }

        .attachment:hover {
            background: #f8f9fa;
        }

        .attachment-icon {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
        }

        .attachment-icon.pdf {
            background: #ea4335;
        }

        .attachment-icon.xlsx {
            background: #34a853;
        }

        .attachment-icon.docx {
            background: #4285f4;
        }

        .attachment-info {
            flex: 1;
        }

        .attachment-name {
            font-size: 13px;
            color: #202124;
            margin-bottom: 2px;
        }

        .attachment-size {
            font-size: 11px;
            color: #5f6368;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Sample data structure
        const sampleThreads = [
            {
                id: 1,
                title: "Project Alpha Discussion",
                participants: 5,
                messages: 12,
                lastActivity: "2 hours ago",
                unread: 0,
                preview: "Hi team, I wanted to start a discussion about the Project Alpha requirements...",
                starred: true
            },
            {
                id: 2,
                title: "Budget Review Meeting",
                participants: 3,
                messages: 7,
                lastActivity: "4h ago",
                unread: 2,
                preview: "Quarterly budget review and approval process discussion...",
                starred: false
            },
            {
                id: 3,
                title: "Marketing Campaign Ideas",
                participants: 8,
                messages: 15,
                lastActivity: "1d ago",
                unread: 0,
                preview: "Brainstorming session for Q4 marketing initiatives...",
                starred: false
            }
        ];

        const sampleMessages = [
            {
                id: 1,
                author: "Sarah Johnson",
                email: "sarah.johnson@company.com",
                avatar: "SJ",
                time: "Mar 15, 2024 at 9:30 AM",
                subject: "Project Alpha - Initial Requirements Discussion",
                body: "Hi team, I wanted to start a discussion about the Project Alpha requirements. We need to finalize the scope and timeline by the end of this week. Please review the attached documents and share your thoughts.",
                attachments: ["Project_Requirements.pdf"],
                replies: []
            },
            {
                id: 2,
                author: "Mike Rodriguez",
                email: "mike.rodriguez@company.com",
                avatar: "MR",
                time: "Mar 15, 2024 at 10:15 AM",
                subject: "Re: Project Alpha - Initial Requirements Discussion",
                body: "Thanks Sarah! I've reviewed the documents. The timeline looks aggressive but achievable. I have some concerns about the resource allocation in Phase 2. Can we schedule a quick call to discuss?",
                attachments: [],
                replies: []
            }
        ];

        const sampleParticipants = [
            { name: "Sarah Johnson", role: "Project Manager", avatar: "SJ", status: "active" },
            { name: "Mike Rodriguez", role: "Senior Developer", avatar: "MR", status: "away" },
            { name: "Emily Chen", role: "UX Designer", avatar: "EC", status: "active" },
            { name: "David Wilson", role: "Tech Lead", avatar: "DW", status: "offline" },
            { name: "Anna Martinez", role: "Finance Manager", avatar: "AM", status: "active" }
        ];

        function ModernThreadNavigator() {
            const [activeThread, setActiveThread] = useState(sampleThreads[0]);
            const [activeFilter, setActiveFilter] = useState('all');
            const [viewMode, setViewMode] = useState('tree');
            const [threadData, setThreadData] = useState(null);

            // Load thread data from JSON
            useEffect(() => {
                fetch('thread_report.json')
                    .then(response => response.json())
                    .then(data => setThreadData(data))
                    .catch(error => console.error('Error loading thread data:', error));
            }, []);

            const filterCounts = {
                all: 24,
                unread: 6,
                starred: 3,
                archived: 0
            };

            return (
                <div className="app-container">
                    {/* Header */}
                    <div className="header">
                        <div className="header-left">
                            <div className="app-logo">
                                <div className="logo-icon">📧</div>
                                ThreadView
                            </div>
                            <div className="breadcrumb">› Email Threads</div>
                        </div>
                        <div className="header-center">
                            <input
                                type="text"
                                className="search-bar"
                                placeholder="Search threads..."
                            />
                        </div>
                        <div className="header-right">
                            <button className="new-thread-btn">
                                + New Thread
                            </button>
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="main-content">
                        {/* Left Sidebar */}
                        <div className="left-sidebar">
                            <div className="sidebar-section">
                                <div className="section-title">Thread List</div>
                                <div className="thread-filter">
                                    <div
                                        className={`filter-item ${activeFilter === 'all' ? 'active' : ''}`}
                                        onClick={() => setActiveFilter('all')}
                                    >
                                        All Threads
                                        <span className="filter-count">{filterCounts.all}</span>
                                    </div>
                                    <div
                                        className={`filter-item ${activeFilter === 'unread' ? 'active' : ''}`}
                                        onClick={() => setActiveFilter('unread')}
                                    >
                                        Unread
                                        <span className="filter-count">{filterCounts.unread}</span>
                                    </div>
                                    <div
                                        className={`filter-item ${activeFilter === 'starred' ? 'active' : ''}`}
                                        onClick={() => setActiveFilter('starred')}
                                    >
                                        Starred
                                        <span className="filter-count">{filterCounts.starred}</span>
                                    </div>
                                    <div
                                        className={`filter-item ${activeFilter === 'archived' ? 'active' : ''}`}
                                        onClick={() => setActiveFilter('archived')}
                                    >
                                        Archived
                                        <span className="filter-count">{filterCounts.archived}</span>
                                    </div>
                                </div>
                            </div>

                            <div className="thread-list">
                                {sampleThreads.map(thread => (
                                    <div
                                        key={thread.id}
                                        className={`thread-item ${activeThread.id === thread.id ? 'active' : ''}`}
                                        onClick={() => setActiveThread(thread)}
                                    >
                                        <div className="thread-title">{thread.title}</div>
                                        <div className="thread-meta">
                                            <span>{thread.participants} participants</span>
                                            <span>{thread.messages} messages</span>
                                            <span>Last activity {thread.lastActivity}</span>
                                        </div>
                                        <div className="thread-preview">{thread.preview}</div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Center Content */}
                        <div className="center-content">
                            <div className="conversation-header">
                                <div className="conversation-title">{activeThread.title}</div>
                                <div className="conversation-meta">
                                    <span>Started by Sarah Johnson on March 15, 2024</span>
                                    <span>👥 {activeThread.participants} participants</span>
                                    <span>💬 {activeThread.messages} messages</span>
                                    <span>🕒 Last activity {activeThread.lastActivity}</span>
                                </div>
                                <div className="conversation-actions">
                                    <button className="action-btn">⭐ Star</button>
                                    <button className="action-btn">📁 Archive</button>
                                    <button className="action-btn primary">💬 Reply</button>
                                </div>
                            </div>

                            <div className="conversation-view">
                                <div className="view-controls">
                                    <span>View:</span>
                                    <button
                                        className={`view-btn ${viewMode === 'tree' ? 'active' : ''}`}
                                        onClick={() => setViewMode('tree')}
                                    >
                                        Tree View
                                    </button>
                                    <button
                                        className={`view-btn ${viewMode === 'timeline' ? 'active' : ''}`}
                                        onClick={() => setViewMode('timeline')}
                                    >
                                        Timeline
                                    </button>
                                    <button
                                        className={`view-btn ${viewMode === 'compact' ? 'active' : ''}`}
                                        onClick={() => setViewMode('compact')}
                                    >
                                        Compact
                                    </button>
                                    <div className="sort-controls">
                                        <span>Sort by:</span>
                                        <select style={{border: '1px solid #dadce0', padding: '4px 8px', borderRadius: '4px'}}>
                                            <option>Date (Chronological)</option>
                                            <option>Date (Reverse)</option>
                                            <option>Author</option>
                                        </select>
                                        <button className="view-btn">🔄 Expand All</button>
                                    </div>
                                </div>

                                {viewMode === 'tree' && (
                                    <div className="timeline-container">
                                        <div style={{color: '#5f6368', fontSize: '14px', textAlign: 'center', paddingTop: '40px'}}>
                                            Timeline visualization would appear here
                                        </div>
                                    </div>
                                )}

                                <div className="message-list">
                                    {sampleMessages.map(message => (
                                        <div key={message.id} className="message">
                                            <div className="message-avatar">{message.avatar}</div>
                                            <div className="message-content">
                                                <div className="message-header">
                                                    <span className="message-author">{message.author}</span>
                                                    <span className="message-email">{message.email}</span>
                                                    <span className="message-time">{message.time}</span>
                                                </div>
                                                <div className="message-subject">{message.subject}</div>
                                                <div className="message-body">{message.body}</div>
                                                <div className="message-actions">
                                                    <a href="#" className="message-action">↩️ Reply to Sarah</a>
                                                    <a href="#" className="message-action">💬 Reply</a>
                                                    <a href="#" className="message-action">↗️ Forward</a>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* Right Sidebar */}
                        <div className="right-sidebar">
                            <div className="sidebar-section">
                                <h3>Participants (5)</h3>
                                <div className="participants-list">
                                    {sampleParticipants.map((participant, index) => (
                                        <div key={index} className="participant">
                                            <div className="participant-avatar">{participant.avatar}</div>
                                            <div className="participant-info">
                                                <div className="participant-name">{participant.name}</div>
                                                <div className="participant-role">{participant.role}</div>
                                            </div>
                                            <div className={`participant-status ${participant.status}`}></div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="sidebar-section">
                                <h3>Thread Statistics</h3>
                                <div className="stats-grid">
                                    <div className="stat-item">
                                        <div className="stat-number">12</div>
                                        <div className="stat-label">Total Messages</div>
                                    </div>
                                    <div className="stat-item">
                                        <div className="stat-number">8</div>
                                        <div className="stat-label">Replies</div>
                                    </div>
                                    <div className="stat-item">
                                        <div className="stat-number">1</div>
                                        <div className="stat-label">Forwards</div>
                                    </div>
                                    <div className="stat-item">
                                        <div className="stat-number">3</div>
                                        <div className="stat-label">Attachments</div>
                                    </div>
                                </div>
                            </div>

                            <div className="sidebar-section">
                                <h3>Attachments</h3>
                                <div className="attachments-list">
                                    <div className="attachment">
                                        <div className="attachment-icon pdf">📄</div>
                                        <div className="attachment-info">
                                            <div className="attachment-name">Project_Requirements.pdf</div>
                                            <div className="attachment-size">2.4 MB</div>
                                        </div>
                                    </div>
                                    <div className="attachment">
                                        <div className="attachment-icon xlsx">📊</div>
                                        <div className="attachment-info">
                                            <div className="attachment-name">Budget_Breakdown.xlsx</div>
                                            <div className="attachment-size">156 KB</div>
                                        </div>
                                    </div>
                                    <div className="attachment">
                                        <div className="attachment-icon docx">📝</div>
                                        <div className="attachment-info">
                                            <div className="attachment-name">Technical_Brief.docx</div>
                                            <div className="attachment-size">892 KB</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<ModernThreadNavigator />, document.getElementById('root'));
    </script>
</body>
</html>